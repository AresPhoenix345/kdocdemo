"use strict";(globalThis.webpackChunkkubestellar_docs_initiative=globalThis.webpackChunkkubestellar_docs_initiative||[]).push([[6125],{2275(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"use-cases/compliance","title":"Regional Compliance (Data Residency)","description":"Problem Statement","source":"@site/docs/use-cases/compliance.md","sourceDirName":"use-cases","slug":"/use-cases/compliance","permalink":"/docs/use-cases/compliance","draft":false,"unlisted":false,"editUrl":"https://github.com/kubestellar/kubestellar/edit/main/kdemo/docs/use-cases/compliance.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Multi-Cloud Orchestration","permalink":"/docs/use-cases/multi-cloud"},"next":{"title":"CRD Synchronization (Custom Resources Across Clusters)","permalink":"/docs/use-cases/crd-sync"}}');var l=i(4848),r=i(8453);const a={},t="Regional Compliance (Data Residency)",c={},o=[{value:"Problem Statement",id:"problem-statement",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Implementation Workflow",id:"implementation-workflow",level:2},{value:"Step 1: Label compliant clusters",id:"step-1-label-compliant-clusters",level:3},{value:"Step 2: Label workloads by sensitivity",id:"step-2-label-workloads-by-sensitivity",level:3},{value:"Step 3: Use BindingPolicy to enforce residency",id:"step-3-use-bindingpolicy-to-enforce-residency",level:3},{value:"Step 4: Validate",id:"step-4-validate",level:3},{value:"Recommended Configurations",id:"recommended-configurations",level:2},{value:"BindingPolicy Example",id:"bindingpolicy-example",level:3},{value:"Workload Example",id:"workload-example",level:3},{value:"Expected Outcomes",id:"expected-outcomes",level:2},{value:"Variations and Adaptations",id:"variations-and-adaptations",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"regional-compliance-data-residency",children:"Regional Compliance (Data Residency)"})}),"\n",(0,l.jsx)(n.h2,{id:"problem-statement",children:"Problem Statement"}),"\n",(0,l.jsxs)(n.p,{children:["You must comply with ",(0,l.jsx)(n.strong,{children:"data residency and regulatory requirements"})," (GDPR, sovereignty rules, contractual localization). Workloads handling sensitive data must run only in approved regions, while other workloads can run globally."]}),"\n",(0,l.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"WDS"}),": defines workloads with clear labels indicating data sensitivity"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"ITS"}),": inventories clusters and labels them by compliance scope (region, jurisdiction)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"WECs"}),": clusters in specific regions, labeled with ",(0,l.jsx)(n.code,{children:"residency=eu"}),", ",(0,l.jsx)(n.code,{children:"jurisdiction=gdpr"}),", etc."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"implementation-workflow",children:"Implementation Workflow"}),"\n",(0,l.jsx)(n.h3,{id:"step-1-label-compliant-clusters",children:"Step 1: Label compliant clusters"}),"\n",(0,l.jsxs)(n.p,{children:["In the ",(0,l.jsx)(n.strong,{children:"ITS"})," context:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl config use-context its1\r\nkubectl label managedcluster eu-west-1 residency=eu jurisdiction=gdpr --overwrite\r\nkubectl label managedcluster us-east-1 residency=us jurisdiction=us --overwrite\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-2-label-workloads-by-sensitivity",children:"Step 2: Label workloads by sensitivity"}),"\n",(0,l.jsxs)(n.p,{children:["In the ",(0,l.jsx)(n.strong,{children:"WDS"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: pii-api\r\n  namespace: compliance-demo\r\n  labels:\r\n    app.kubernetes.io/name: pii-api\r\n    data-classification: pii\r\nspec:\r\n  replicas: 2\r\n  selector:\r\n    matchLabels:\r\n      app.kubernetes.io/name: pii-api\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app.kubernetes.io/name: pii-api\r\n        data-classification: pii\r\n    spec:\r\n      containers:\r\n      - name: api\r\n        image: ghcr.io/example/pii-api:1.0.0\r\n        ports:\r\n        - containerPort: 8080\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-3-use-bindingpolicy-to-enforce-residency",children:"Step 3: Use BindingPolicy to enforce residency"}),"\n",(0,l.jsx)(n.p,{children:"Deploy PII workloads only to EU clusters:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: control.kubestellar.io/v1alpha1\r\nkind: BindingPolicy\r\nmetadata:\r\n  name: pii-eu-only\r\n  namespace: compliance-demo\r\nspec:\r\n  clusterSelectors:\r\n  - matchLabels:\r\n      residency: eu\r\n  downsync:\r\n  - objectSelectors:\r\n    - matchLabels:\r\n        data-classification: pii\r\n    resources:\r\n    - namespaces\r\n    - deployments\r\n    - services\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-4-validate",children:"Step 4: Validate"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get deploy -n compliance-demo --context eu-west-1\r\nkubectl get deploy -n compliance-demo --context us-east-1\n"})}),"\n",(0,l.jsx)(n.h2,{id:"recommended-configurations",children:"Recommended Configurations"}),"\n",(0,l.jsx)(n.h3,{id:"bindingpolicy-example",children:"BindingPolicy Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: control.kubestellar.io/v1alpha1\r\nkind: BindingPolicy\r\nmetadata:\r\n  name: residency-policy\r\nspec:\r\n  clusterSelectors:\r\n  - matchLabels:\r\n      jurisdiction: gdpr\r\n  downsync:\r\n  - objectSelectors:\r\n    - matchLabels:\r\n        compliance-scope: gdpr\r\n    resources:\r\n    - namespaces\r\n    - configmaps\r\n    - secrets\r\n    - services\r\n    - deployments\n"})}),"\n",(0,l.jsx)(n.h3,{id:"workload-example",children:"Workload Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\r\nkind: Secret\r\nmetadata:\r\n  name: pii-db-credentials\r\n  namespace: compliance-demo\r\n  labels:\r\n    compliance-scope: gdpr\r\ntype: Opaque\r\nstringData:\r\n  username: demo\r\n  password: demo\n"})}),"\n",(0,l.jsx)(n.h2,{id:"expected-outcomes",children:"Expected Outcomes"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Policy-driven placement ensures regulated workloads run only in approved regions"}),"\n",(0,l.jsx)(n.li,{children:"Reduced operational risk and audit complexity"}),"\n",(0,l.jsx)(n.li,{children:"Simple, label-based governance model"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"variations-and-adaptations",children:"Variations and Adaptations"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Split policies by data class (",(0,l.jsx)(n.code,{children:"pii"}),", ",(0,l.jsx)(n.code,{children:"phi"}),", ",(0,l.jsx)(n.code,{children:"financial"}),")"]}),"\n",(0,l.jsx)(n.li,{children:"Add transforms for region-specific endpoints/annotations"}),"\n",(0,l.jsx)(n.li,{children:"Separate namespaces per compliance domain"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Verify cluster labels reflect the compliance domain"}),"\n",(0,l.jsx)(n.li,{children:"Ensure workloads have correct classification labels"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Add policy-as-code workflows for label governance"}),"\n",(0,l.jsx)(n.li,{children:"Integrate audit logging and continuous compliance checks"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>a,x:()=>t});var s=i(6540);const l={},r=s.createContext(l);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);