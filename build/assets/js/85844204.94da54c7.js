"use strict";(globalThis.webpackChunkkubestellar_docs_initiative=globalThis.webpackChunkkubestellar_docs_initiative||[]).push([[9740],{2314(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"migration/from-argocd","title":"Migrating from ArgoCD to KubeStellar","description":"Overview","source":"@site/docs/migration/from-argocd.md","sourceDirName":"migration","slug":"/migration/from-argocd","permalink":"/docs/migration/from-argocd","draft":false,"unlisted":false,"editUrl":"https://github.com/kubestellar/kubestellar/edit/main/kdemo/docs/migration/from-argocd.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Migration Guides","permalink":"/docs/migration/"},"next":{"title":"Migrating from Karmada to KubeStellar","permalink":"/docs/migration/from-karmada"}}');var r=i(4848),l=i(8453);const t={},a="Migrating from ArgoCD to KubeStellar",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Migration Strategy",id:"migration-strategy",level:2},{value:"Assessment Phase",id:"assessment-phase",level:3},{value:"Preparation Phase",id:"preparation-phase",level:3},{value:"Migration Phase",id:"migration-phase",level:3},{value:"Step 1: Translate cluster targeting logic",id:"step-1-translate-cluster-targeting-logic",level:4},{value:"Step 2: Move a single application first (canary)",id:"step-2-move-a-single-application-first-canary",level:4},{value:"Step 3: Gradually expand scope",id:"step-3-gradually-expand-scope",level:4},{value:"Validation Phase",id:"validation-phase",level:3},{value:"Cutover Phase",id:"cutover-phase",level:3},{value:"Comparison Table",id:"comparison-table",level:2},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"Rollback Plan",id:"rollback-plan",level:2},{value:"Post-Migration Optimization",id:"post-migration-optimization",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"migrating-from-argocd-to-kubestellar",children:"Migrating from ArgoCD to KubeStellar"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"ArgoCD commonly manages multi-cluster deployments using:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Multiple Argo instances (one per cluster)"}),"\n",(0,r.jsx)(n.li,{children:"A single Argo instance with multiple cluster credentials"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ApplicationSet"})," for generating ",(0,r.jsx)(n.code,{children:"Application"})," objects per cluster"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"KubeStellar provides a different model:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Define workloads once"})," in a ",(0,r.jsx)(n.strong,{children:"WDS"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Select target clusters"})," using ",(0,r.jsx)(n.strong,{children:"BindingPolicy"})," label selectors"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Distribute and reconcile"})," via ITS/OCM transport"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This guide helps you map ArgoCD patterns to KubeStellar patterns."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Existing ArgoCD setup and access to repos"}),"\n",(0,r.jsx)(n.li,{children:"Inventory of target clusters and their purposes (dev/stage/prod/regions)"}),"\n",(0,r.jsxs)(n.li,{children:["A working KubeStellar environment (see ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/quickstart/",children:"Quickstart"})}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Downtime plan (often none if migrating gradually)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"migration-strategy",children:"Migration Strategy"}),"\n",(0,r.jsx)(n.h3,{id:"assessment-phase",children:"Assessment Phase"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Inventory current Applications/ApplicationSets:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Repos, paths, sync policies"}),"\n",(0,r.jsx)(n.li,{children:"Target clusters/namespaces"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Identify cluster selection logic:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cluster labels in Argo (common in ApplicationSet generators)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Identify overlays:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"kustomize, helm values, env-specific patches"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"preparation-phase",children:"Preparation Phase"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Ensure clusters are registered as WECs in KubeStellar ITS."}),"\n",(0,r.jsx)(n.li,{children:"Apply meaningful labels in ITS that match your Argo selection intent:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl config use-context its1\r\nkubectl label managedcluster prod-us-east environment=prod region=us-east --overwrite\r\nkubectl label managedcluster stage-us-east environment=staging region=us-east --overwrite\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:["Choose how you will produce workload manifests in WDS:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Option A"}),": GitOps pipeline renders manifests and applies to WDS"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Option B"}),": Use Helm/Kustomize locally and apply to WDS during migration"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"migration-phase",children:"Migration Phase"}),"\n",(0,r.jsx)(n.h4,{id:"step-1-translate-cluster-targeting-logic",children:"Step 1: Translate cluster targeting logic"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ArgoCD ApplicationSet"})," (conceptual):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: argoproj.io/v1alpha1\r\nkind: ApplicationSet\r\nspec:\r\n  generators:\r\n  - clusters:\r\n      selector:\r\n        matchLabels:\r\n          environment: prod\r\n  template:\r\n    spec:\r\n      destination:\r\n        namespace: shop\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"KubeStellar BindingPolicy"})," equivalent:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: control.kubestellar.io/v1alpha1\r\nkind: BindingPolicy\r\nmetadata:\r\n  name: shop-prod\r\nnamespace: shop\r\nspec:\r\n  clusterSelectors:\r\n  - matchLabels:\r\n      environment: prod\r\n  downsync:\r\n  - objectSelectors:\r\n    - matchLabels:\r\n        app.kubernetes.io/part-of: shop\r\n    resources:\r\n    - namespaces\r\n    - deployments\r\n    - services\r\n    - configmaps\r\n    - secrets\n"})}),"\n",(0,r.jsx)(n.h4,{id:"step-2-move-a-single-application-first-canary",children:"Step 2: Move a single application first (canary)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Apply app manifests to WDS with consistent labels:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"app.kubernetes.io/part-of: shop"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Create BindingPolicy targeting a small subset:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ring=canary"})," or a single region"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Validate on WECs."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"step-3-gradually-expand-scope",children:"Step 3: Gradually expand scope"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Broaden clusterSelectors (add more regions/environments)"}),"\n",(0,r.jsx)(n.li,{children:"Decommission corresponding Argo Applications once stable"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"validation-phase",children:"Validation Phase"}),"\n",(0,r.jsx)(n.p,{children:"Use repeatable checks:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# WDS feedback\r\nkubectl config use-context wds1\r\nkubectl get bindingpolicies -A\r\nkubectl get bindings -A\r\n\r\n# WEC state\r\nkubectl get deploy -n shop --context prod-us-east\r\nkubectl get svc -n shop --context prod-us-east\n"})}),"\n",(0,r.jsx)(n.h3,{id:"cutover-phase",children:"Cutover Phase"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Freeze changes in Argo for the migrated apps."}),"\n",(0,r.jsx)(n.li,{children:"Promote KubeStellar policies/labels to production scope."}),"\n",(0,r.jsx)(n.li,{children:"Remove Argo Applications for migrated workloads."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"comparison-table",children:"Comparison Table"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Feature"}),(0,r.jsx)(n.th,{children:"ArgoCD"}),(0,r.jsx)(n.th,{children:"KubeStellar"}),(0,r.jsx)(n.th,{children:"Notes"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Workload source of truth"}),(0,r.jsx)(n.td,{children:"Git repo"}),(0,r.jsx)(n.td,{children:"WDS API (often fed by GitOps)"}),(0,r.jsx)(n.td,{children:"WDS can still be Git-driven"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cluster targeting"}),(0,r.jsx)(n.td,{children:"AppSet generators / destination"}),(0,r.jsx)(n.td,{children:"BindingPolicy clusterSelectors"}),(0,r.jsx)(n.td,{children:"Both are label-based patterns"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Drift correction"}),(0,r.jsx)(n.td,{children:"Argo sync"}),(0,r.jsx)(n.td,{children:"Controllers + OCM transport"}),(0,r.jsx)(n.td,{children:"KubeStellar keeps native objects"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Multi-cluster scale"}),(0,r.jsx)(n.td,{children:"Many apps per cluster"}),(0,r.jsx)(n.td,{children:"Policy selects clusters"}),(0,r.jsx)(n.td,{children:"Less duplication at scale"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Missing or inconsistent cluster labels in ITS"}),"\n",(0,r.jsx)(n.li,{children:"Workload labels don\u2019t match BindingPolicy objectSelectors"}),"\n",(0,r.jsxs)(n.li,{children:["Namespace creation omitted (",(0,r.jsx)(n.code,{children:"namespaces"})," not downsynced)"]}),"\n",(0,r.jsx)(n.li,{children:"Attempting to migrate everything at once (avoid)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"rollback-plan",children:"Rollback Plan"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Keep Argo Applications defined but paused"}),"\n",(0,r.jsx)(n.li,{children:"If needed, re-enable Argo sync and remove KubeStellar BindingPolicy for that app"}),"\n",(0,r.jsx)(n.li,{children:"Ensure ownership clarity to avoid \u201ctwo reconcilers\u201d fighting"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"post-migration-optimization",children:"Post-Migration Optimization"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Standardize cluster label taxonomy (",(0,r.jsx)(n.code,{children:"environment"}),", ",(0,r.jsx)(n.code,{children:"region"}),", ",(0,r.jsx)(n.code,{children:"provider"}),", ",(0,r.jsx)(n.code,{children:"ring"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Adopt ring-based promotions"}),"\n",(0,r.jsx)(n.li,{children:"Add transforms for cluster-specific annotations (ingress/LB/storage)"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>a});var s=i(6540);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);