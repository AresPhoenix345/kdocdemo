"use strict";(globalThis.webpackChunkkubestellar_docs_initiative=globalThis.webpackChunkkubestellar_docs_initiative||[]).push([[7457],{6482(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"use-cases/edge-deployment","title":"Edge Deployment","description":"Problem Statement","source":"@site/docs/use-cases/edge-deployment.md","sourceDirName":"use-cases","slug":"/use-cases/edge-deployment","permalink":"/docs/use-cases/edge-deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/kubestellar/kubestellar/edit/main/kdemo/docs/use-cases/edge-deployment.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Use Cases","permalink":"/docs/use-cases/"},"next":{"title":"Multi-Cloud Orchestration","permalink":"/docs/use-cases/multi-cloud"}}');var i=s(4848),r=s(8453);const l={},a="Edge Deployment",o={},d=[{value:"Problem Statement",id:"problem-statement",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Implementation Workflow",id:"implementation-workflow",level:2},{value:"Step 1: Label edge clusters (WECs)",id:"step-1-label-edge-clusters-wecs",level:3},{value:"Step 2: Define workload in WDS",id:"step-2-define-workload-in-wds",level:3},{value:"Step 3: Target edge sites with BindingPolicy",id:"step-3-target-edge-sites-with-bindingpolicy",level:3},{value:"Step 4: Validate rollout",id:"step-4-validate-rollout",level:3},{value:"Recommended Configurations",id:"recommended-configurations",level:2},{value:"BindingPolicy Example",id:"bindingpolicy-example",level:3},{value:"Workload Example",id:"workload-example",level:3},{value:"Expected Outcomes",id:"expected-outcomes",level:2},{value:"Variations and Adaptations",id:"variations-and-adaptations",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"edge-deployment",children:"Edge Deployment"})}),"\n",(0,i.jsx)(n.h2,{id:"problem-statement",children:"Problem Statement"}),"\n",(0,i.jsxs)(n.p,{children:["You operate ",(0,i.jsx)(n.strong,{children:"many remote edge sites"})," (retail stores, manufacturing plants, telecom towers) and need to deploy the same application stack consistently\u2014while still supporting ",(0,i.jsx)(n.strong,{children:"site-specific configuration"})," and ",(0,i.jsx)(n.strong,{children:"limited connectivity"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"WDS"}),": app team defines workloads once (Deployments/Services/ConfigMaps/CRDs)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ITS"}),": hub inventory + transport, selects edge sites by labels"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"WECs"}),": each edge site cluster runs the workloads"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"implementation-workflow",children:"Implementation Workflow"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-label-edge-clusters-wecs",children:"Step 1: Label edge clusters (WECs)"}),"\n",(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.strong,{children:"ITS"})," context:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl config use-context its1\r\nkubectl label managedcluster store-001 location-group=edge site=store-001 --overwrite\r\nkubectl label managedcluster store-002 location-group=edge site=store-002 --overwrite\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-2-define-workload-in-wds",children:"Step 2: Define workload in WDS"}),"\n",(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.strong,{children:"WDS"})," context:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: edge-nginx\r\n  namespace: edge-demo\r\n  labels:\r\n    app.kubernetes.io/name: edge-nginx\r\nspec:\r\n  replicas: 1\r\n  selector:\r\n    matchLabels:\r\n      app.kubernetes.io/name: edge-nginx\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app.kubernetes.io/name: edge-nginx\r\n    spec:\r\n      containers:\r\n      - name: nginx\r\n        image: nginx:1.25\r\n        ports:\r\n        - containerPort: 80\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-3-target-edge-sites-with-bindingpolicy",children:"Step 3: Target edge sites with BindingPolicy"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: control.kubestellar.io/v1alpha1\r\nkind: BindingPolicy\r\nmetadata:\r\n  name: edge-nginx\r\n  namespace: edge-demo\r\nspec:\r\n  clusterSelectors:\r\n  - matchLabels:\r\n      location-group: edge\r\n  downsync:\r\n  - objectSelectors:\r\n    - matchLabels:\r\n        app.kubernetes.io/name: edge-nginx\r\n    resources:\r\n    - namespaces\r\n    - deployments\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-4-validate-rollout",children:"Step 4: Validate rollout"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# In WDS\r\nkubectl config use-context wds1\r\nkubectl get bindingpolicies -n edge-demo\r\nkubectl get bindings -n edge-demo\r\n\r\n# On an edge WEC\r\nkubectl config use-context store-001\r\nkubectl get deploy -n edge-demo\r\nkubectl get pods -n edge-demo\n"})}),"\n",(0,i.jsx)(n.h2,{id:"recommended-configurations",children:"Recommended Configurations"}),"\n",(0,i.jsx)(n.h3,{id:"bindingpolicy-example",children:"BindingPolicy Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: control.kubestellar.io/v1alpha1\r\nkind: BindingPolicy\r\nmetadata:\r\n  name: edge-stack\r\nspec:\r\n  clusterSelectors:\r\n  - matchLabels:\r\n      location-group: edge\r\n  downsync:\r\n  - objectSelectors:\r\n    - matchLabels:\r\n        app.kubernetes.io/part-of: edge-stack\r\n    resources:\r\n    - namespaces\r\n    - configmaps\r\n    - secrets\r\n    - services\r\n    - deployments\n"})}),"\n",(0,i.jsx)(n.h3,{id:"workload-example",children:"Workload Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: edge-config\r\n  namespace: edge-demo\r\n  labels:\r\n    app.kubernetes.io/part-of: edge-stack\r\ndata:\r\n  FEATURE_FLAG: "true"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"expected-outcomes",children:"Expected Outcomes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"One workload definition drives a fleet-wide rollout"}),"\n",(0,i.jsx)(n.li,{children:"Edge sites are targeted via labels, not manual context switching"}),"\n",(0,i.jsx)(n.li,{children:"Updates in WDS propagate to all matched edge clusters"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"variations-and-adaptations",children:"Variations and Adaptations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Canary edge rollouts"}),": select a subset of sites via label (e.g., ",(0,i.jsx)(n.code,{children:"ring=canary"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Per-site overrides"}),": use transforms or per-site configmaps keyed by ",(0,i.jsx)(n.code,{children:"site=..."})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Disconnected edge"}),": design for delayed reconciliation and intermittent connectivity"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If clusters don\u2019t match: verify labels in ITS (",(0,i.jsx)(n.code,{children:"kubectl get managedclusters --show-labels --context its1"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["If namespace missing: ensure ",(0,i.jsx)(n.code,{children:"namespaces"})," is included in downsync resources"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Expand to multi-app stacks (ingress, observability agents)"}),"\n",(0,i.jsx)(n.li,{children:"Add status collection and dashboards"}),"\n",(0,i.jsx)(n.li,{children:"Apply network policies and RBAC for multi-tenancy"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>a});var t=s(6540);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);