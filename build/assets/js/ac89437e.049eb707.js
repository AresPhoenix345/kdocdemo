"use strict";(globalThis.webpackChunkkubestellar_docs_initiative=globalThis.webpackChunkkubestellar_docs_initiative||[]).push([[1745],{5320(e,n,r){r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"use-cases/multi-cloud","title":"Multi-Cloud Orchestration","description":"Problem Statement","source":"@site/docs/use-cases/multi-cloud.md","sourceDirName":"use-cases","slug":"/use-cases/multi-cloud","permalink":"/docs/use-cases/multi-cloud","draft":false,"unlisted":false,"editUrl":"https://github.com/kubestellar/kubestellar/edit/main/kdemo/docs/use-cases/multi-cloud.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Edge Deployment","permalink":"/docs/use-cases/edge-deployment"},"next":{"title":"Regional Compliance (Data Residency)","permalink":"/docs/use-cases/compliance"}}');var l=r(4848),t=r(8453);const i={},o="Multi-Cloud Orchestration",a={},c=[{value:"Problem Statement",id:"problem-statement",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Implementation Workflow",id:"implementation-workflow",level:2},{value:"Step 1: Label clusters by cloud/region",id:"step-1-label-clusters-by-cloudregion",level:3},{value:"Step 2: Define workload once in WDS",id:"step-2-define-workload-once-in-wds",level:3},{value:"Step 3: Target specific clouds via BindingPolicy",id:"step-3-target-specific-clouds-via-bindingpolicy",level:3},{value:"Step 4: Validate",id:"step-4-validate",level:3},{value:"Recommended Configurations",id:"recommended-configurations",level:2},{value:"BindingPolicy Example",id:"bindingpolicy-example",level:3},{value:"Workload Example",id:"workload-example",level:3},{value:"Expected Outcomes",id:"expected-outcomes",level:2},{value:"Variations and Adaptations",id:"variations-and-adaptations",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"multi-cloud-orchestration",children:"Multi-Cloud Orchestration"})}),"\n",(0,l.jsx)(n.h2,{id:"problem-statement",children:"Problem Statement"}),"\n",(0,l.jsxs)(n.p,{children:["You want to run the same application across ",(0,l.jsx)(n.strong,{children:"AWS, GCP, and Azure"})," to improve resilience, reduce vendor lock-in, and place workloads close to users\u2014without maintaining separate deployment pipelines per cloud."]}),"\n",(0,l.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"WDS"}),": one source of truth for workloads"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"ITS"}),": inventories multi-cloud WECs and transports workloads"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"WECs"}),": clusters in each cloud, labeled by provider/region/tier"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"implementation-workflow",children:"Implementation Workflow"}),"\n",(0,l.jsx)(n.h3,{id:"step-1-label-clusters-by-cloudregion",children:"Step 1: Label clusters by cloud/region"}),"\n",(0,l.jsxs)(n.p,{children:["In the ",(0,l.jsx)(n.strong,{children:"ITS"})," context:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl config use-context its1\r\nkubectl label managedcluster aws-us-east-1 provider=aws region=us-east-1 --overwrite\r\nkubectl label managedcluster gcp-us-central1 provider=gcp region=us-central1 --overwrite\r\nkubectl label managedcluster azure-eastus provider=azure region=eastus --overwrite\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-2-define-workload-once-in-wds",children:"Step 2: Define workload once in WDS"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: checkout\r\n  namespace: shop\r\n  labels:\r\n    app.kubernetes.io/name: checkout\r\n    app.kubernetes.io/part-of: shop\r\nspec:\r\n  replicas: 2\r\n  selector:\r\n    matchLabels:\r\n      app.kubernetes.io/name: checkout\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app.kubernetes.io/name: checkout\r\n    spec:\r\n      containers:\r\n      - name: checkout\r\n        image: ghcr.io/example/checkout:1.0.0\r\n        ports:\r\n        - containerPort: 8080\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-3-target-specific-clouds-via-bindingpolicy",children:"Step 3: Target specific clouds via BindingPolicy"}),"\n",(0,l.jsx)(n.p,{children:"Example: deploy to AWS + GCP only (exclude Azure):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: control.kubestellar.io/v1alpha1\r\nkind: BindingPolicy\r\nmetadata:\r\n  name: checkout-multicloud\r\n  namespace: shop\r\nspec:\r\n  clusterSelectors:\r\n  - matchLabels:\r\n      provider: aws\r\n  - matchLabels:\r\n      provider: gcp\r\n  downsync:\r\n  - objectSelectors:\r\n    - matchLabels:\r\n        app.kubernetes.io/name: checkout\r\n    resources:\r\n    - namespaces\r\n    - deployments\r\n    - services\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-4-validate",children:"Step 4: Validate"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# WDS: see policy and binding feedback\r\nkubectl config use-context wds1\r\nkubectl get bindingpolicies -n shop\r\nkubectl get bindings -n shop\r\n\r\n# On WECs\r\nkubectl get deploy -n shop --context aws-us-east-1\r\nkubectl get deploy -n shop --context gcp-us-central1\r\nkubectl get deploy -n shop --context azure-eastus\n"})}),"\n",(0,l.jsx)(n.h2,{id:"recommended-configurations",children:"Recommended Configurations"}),"\n",(0,l.jsx)(n.h3,{id:"bindingpolicy-example",children:"BindingPolicy Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: control.kubestellar.io/v1alpha1\r\nkind: BindingPolicy\r\nmetadata:\r\n  name: shop-tier1\r\nspec:\r\n  clusterSelectors:\r\n  - matchLabels:\r\n      tier: primary\r\n  downsync:\r\n  - objectSelectors:\r\n    - matchLabels:\r\n        app.kubernetes.io/part-of: shop\r\n    resources:\r\n    - namespaces\r\n    - configmaps\r\n    - secrets\r\n    - services\r\n    - deployments\n"})}),"\n",(0,l.jsx)(n.h3,{id:"workload-example",children:"Workload Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: checkout\r\n  namespace: shop\r\n  labels:\r\n    app.kubernetes.io/name: checkout\r\nspec:\r\n  selector:\r\n    app.kubernetes.io/name: checkout\r\n  ports:\r\n  - port: 80\r\n    targetPort: 8080\n"})}),"\n",(0,l.jsx)(n.h2,{id:"expected-outcomes",children:"Expected Outcomes"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Single pipeline defines workloads once"}),"\n",(0,l.jsx)(n.li,{children:"Cloud-specific targeting controlled by labels"}),"\n",(0,l.jsx)(n.li,{children:"Faster, safer multi-cloud rollouts with policy-driven selection"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"variations-and-adaptations",children:"Variations and Adaptations"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Region-based routing"}),": ",(0,l.jsx)(n.code,{children:"region in (us-east-1, us-central1)"})," for proximity"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Cost-optimized scheduling"}),": use labels for spot/preemptible pools"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Burst to cloud"}),": include/exclude clouds dynamically by changing labels"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Ensure ManagedClusters carry expected labels in ITS"}),"\n",(0,l.jsx)(n.li,{children:"If services behave differently, reconcile cloud LB differences (annotations, ingress)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Add per-cloud transforms for annotations (load balancers, ingress classes)"}),"\n",(0,l.jsx)(n.li,{children:"Integrate progressive delivery strategies (ring/canary)"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>i,x:()=>o});var s=r(6540);const l={},t=s.createContext(l);function i(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);