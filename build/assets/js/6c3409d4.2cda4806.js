"use strict";(globalThis.webpackChunkkubestellar_docs_initiative=globalThis.webpackChunkkubestellar_docs_initiative||[]).push([[3698],{9402(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"architecture/wecs","title":"Workload Execution Clusters (WECs)","description":"What is a WEC?","source":"@site/docs/architecture/wecs.md","sourceDirName":"architecture","slug":"/architecture/wecs","permalink":"/docs/architecture/wecs","draft":false,"unlisted":false,"editUrl":"https://github.com/kubestellar/kubestellar/edit/main/kdemo/docs/architecture/wecs.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Inventory and Transport Space (ITS)","permalink":"/docs/architecture/its"},"next":{"title":"BindingPolicy","permalink":"/docs/architecture/binding-policy"}}');var r=t(4848),i=t(8453);const l={},c="Workload Execution Clusters (WECs)",o={},a=[{value:"What is a WEC?",id:"what-is-a-wec",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Creating WECs (Common Options)",id:"creating-wecs-common-options",level:2},{value:"Registering a WEC (Conceptual)",id:"registering-a-wec-conceptual",level:2},{value:"Labeling WECs",id:"labeling-wecs",level:2},{value:"Monitoring &amp; Health",id:"monitoring--health",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"workload-execution-clusters-wecs",children:"Workload Execution Clusters (WECs)"})}),"\n",(0,r.jsx)(n.h2,{id:"what-is-a-wec",children:"What is a WEC?"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"Workload Execution Cluster (WEC)"})," is a Kubernetes cluster where KubeStellar actually deploys and runs workloads defined in a WDS."]}),"\n",(0,r.jsx)(n.p,{children:"WECs:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Run the actual workloads"}),"\n",(0,r.jsx)(n.li,{children:"Connect to the ITS through OCM (klusterlet agent)"}),"\n",(0,r.jsxs)(n.li,{children:["Are registered in the ITS as ",(0,r.jsx)(n.code,{children:"ManagedCluster"})," objects"]}),"\n",(0,r.jsx)(n.li,{children:"Are labeled for targeting via BindingPolicies"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,r.jsx)(n.p,{children:"To function as a WEC, a cluster should:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Have network connectivity to the ITS endpoint"}),"\n",(0,r.jsx)(n.li,{children:"Have a working Kubernetes control plane"}),"\n",(0,r.jsx)(n.li,{children:"Run OCM agent components after registration"}),"\n",(0,r.jsx)(n.li,{children:"Be registered with an ITS"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-wecs-common-options",children:"Creating WECs (Common Options)"}),"\n",(0,r.jsx)(n.p,{children:"For development/testing:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kind create cluster --name cluster1\r\nkubectl config rename-context kind-cluster1 cluster1\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"k3d cluster create cluster1\r\nkubectl config rename-context k3d-cluster1 cluster1\n"})}),"\n",(0,r.jsx)(n.p,{children:"For edge:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"MicroShift (resource constrained)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For production:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"EKS / GKE / AKS / OpenShift / any conformant Kubernetes"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"registering-a-wec-conceptual",children:"Registering a WEC (Conceptual)"}),"\n",(0,r.jsx)(n.p,{children:"Registration installs the agent and establishes trust with the ITS:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"clusteradm --context its1 get token\r\nclusteradm join --hub-token <token> --hub-apiserver <api-server-url> --cluster-name cluster1 --context cluster1\r\nclusteradm --context its1 accept --clusters cluster1\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Your quickstart may use a script or a slightly different join flow; the goal is the same: ",(0,r.jsx)(n.code,{children:"ManagedCluster"})," becomes ",(0,r.jsx)(n.code,{children:"Available"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"labeling-wecs",children:"Labeling WECs"}),"\n",(0,r.jsx)(n.p,{children:"Label clusters in the ITS so BindingPolicies can select them:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl --context its1 label managedcluster cluster1 location-group=edge environment=staging --overwrite\n"})}),"\n",(0,r.jsx)(n.h2,{id:"monitoring--health",children:"Monitoring & Health"}),"\n",(0,r.jsx)(n.p,{children:"In the ITS context:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl --context its1 get managedclusters\r\nkubectl --context its1 describe managedcluster cluster1\n"})}),"\n",(0,r.jsx)(n.p,{children:"On the WEC itself, confirm agent pods:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl --context cluster1 get pods -n open-cluster-management-agent\n"})}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/architecture/binding-policy",children:"BindingPolicy"})})," to place workloads onto WECs"]}),"\n",(0,r.jsxs)(n.li,{children:["If workloads don\u2019t show up, start with ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/troubleshooting/",children:"Troubleshooting"})})]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>l,x:()=>c});var s=t(6540);const r={},i=s.createContext(r);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);